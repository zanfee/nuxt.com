import{l as T,X as Y,c3 as H,Y as q,d as I,$ as Z,a0 as M,bK as G,r as w,bH as W,o as E,aM as Q,bw as R,K as F,a2 as X,a3 as L,b as $,c as A,e as z,Q as N,au as D,n as ee,c4 as te,m as ae,aV as le,D as J,ai as ne,k as oe,bO as se,a as re,bh as j,a$ as ue,c5 as ie,c6 as de,c7 as ce,g as m,w as S,N as f,aZ as me,f as fe,bU as pe,c8 as ye,c9 as ve,U as be,aI as ge}from"./D5zTXdpo.js";import{_ as he}from"./DvIQQaiT.js";import{_ as we}from"./Db2t9etp.js";import"./BoCRaupo.js";import"./Cpj98o6Y.js";import"./BneCoJRQ.js";const x=Y(q.ui.strategy,q.ui.textarea,H),_e=I({inheritAttrs:!1,props:{modelValue:{type:[String,Number],default:""},id:{type:String,default:null},name:{type:String,default:null},placeholder:{type:String,default:null},required:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},rows:{type:Number,default:3},maxrows:{type:Number,default:0},autoresize:{type:Boolean,default:!1},autofocus:{type:Boolean,default:!1},autofocusDelay:{type:Number,default:100},resize:{type:Boolean,default:!1},padded:{type:Boolean,default:!0},size:{type:String,default:null,validator(e){return Object.keys(x.size).includes(e)}},color:{type:String,default:()=>x.default.color,validator(e){return[...q.ui.colors,...Object.keys(x.color)].includes(e)}},variant:{type:String,default:()=>x.default.variant,validator(e){return[...Object.keys(x.variant),...Object.values(x.color).flatMap(o=>Object.keys(o))].includes(e)}},textareaClass:{type:String,default:null},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})},modelModifiers:{type:Object,default:()=>({})}},emits:["update:modelValue","blur","change"],setup(e,{emit:o}){const{ui:n,attrs:r}=Z("textarea",M(e,"ui"),x,M(e,"class")),{emitFormBlur:c,emitFormInput:l,inputId:d,color:y,size:v,name:p}=G(e,x),t=w(W({},e.modelModifiers,{trim:!1,lazy:!1,number:!1})),a=w(null),u=()=>{var s;e.autofocus&&((s=a.value)==null||s.focus())},i=()=>{if(e.autoresize){if(!a.value)return;a.value.rows=e.rows;const s=window.getComputedStyle(a.value),b=parseInt(s.paddingTop),V=parseInt(s.paddingBottom),g=b+V,P=parseInt(s.lineHeight),{scrollHeight:K}=a.value,U=(K-g)/P;U>e.rows&&(a.value.rows=e.maxrows?Math.min(U,e.maxrows):U)}},_=s=>{t.value.trim&&(s=s.trim()),t.value.number&&(s=te(s)),o("update:modelValue",s),l()},h=s=>{i(),t.value.lazy||_(s.target.value)},k=s=>{const b=s.target.value;o("change",b),t.value.lazy&&_(b),t.value.trim&&(s.target.value=b.trim())},O=s=>{o("blur",s),c()};E(()=>{setTimeout(()=>{u()},e.autofocusDelay)}),Q(()=>e.modelValue,()=>{R(i)}),E(()=>{setTimeout(()=>{u(),i()},100)});const C=F(()=>{var b,V;const s=((V=(b=n.value.color)==null?void 0:b[y.value])==null?void 0:V[e.variant])||n.value.variant[e.variant];return X(L(n.value.base,n.value.form,n.value.rounded,n.value.placeholder,n.value.size[v.value],e.padded?n.value.padding[v.value]:"p-0",s==null?void 0:s.replaceAll("{color}",y.value),!e.resize&&"resize-none"),e.textareaClass)});return{ui:n,attrs:r,name:p,inputId:d,textarea:a,textareaClass:C,onInput:h,onChange:k,onBlur:O}}}),xe=["id","value","name","rows","required","disabled","placeholder"];function Se(e,o,n,r,c,l){return $(),A("div",{class:ee(e.ui.wrapper)},[z("textarea",N({id:e.inputId,ref:"textarea",value:e.modelValue,name:e.name,rows:e.rows,required:e.required,disabled:e.disabled,placeholder:e.placeholder,class:e.textareaClass},e.attrs,{onInput:o[0]||(o[0]=(...d)=>e.onInput&&e.onInput(...d)),onBlur:o[1]||(o[1]=(...d)=>e.onBlur&&e.onBlur(...d)),onChange:o[2]||(o[2]=(...d)=>e.onChange&&e.onChange(...d))}),null,16,xe),D(e.$slots,"default")],2)}const Ve=T(_e,[["render",Se]]),$e=I({__name:"NuxtTurnstile",props:{modelValue:{type:String,required:!1},element:{type:String,default:"div"},siteKey:{type:String,required:!1},options:{type:Object,default:()=>({})},resetInterval:{type:Number,default:1e3*250}},emits:["update:modelValue"],setup(e,{expose:o,emit:n}){const r=e,c=n,l=ae().public.turnstile,d=oe(),y=w(),v=w(!1);let p,t;const a=()=>{p&&d.$turnstile.reset(p)},u=()=>{v.value=!0,clearInterval(t),p&&d.$turnstile.remove(p)};return E(async()=>{await R(),p=await d.$turnstile.render(y.value,{sitekey:r.siteKey||l.siteKey,...r.options,callback:i=>c("update:modelValue",i)}),t=setInterval(a,r.resetInterval),v.value&&u()}),le(u),o({reset:a}),(i,_)=>($(),J(ne(e.element),{ref_key:"el",ref:y},null,512))}});class B extends Error{constructor(o){super(o),this.message=o,Object.setPrototypeOf(this,B.prototype)}}const Oe=I({props:{schema:{type:Object,default:void 0},state:{type:Object,required:!0},validate:{type:Function,default:()=>[]},validateOn:{type:Array,default:()=>["blur","input","change","submit"]}},emits:["submit","error"],setup(e,{expose:o,emit:n}){const r=se("$omWu6n3PnU"),c=ie(`form-${r}`);E(()=>{c.on(async t=>{var a;t.type!=="submit"&&((a=e.validateOn)!=null&&a.includes(t.type))&&await v(t.path,{silent:!0})})}),re(()=>{c.reset()});const l=w([]);j("form-errors",l),j("form-events",c);const d=w({});j("form-inputs",d);async function y(){let t=await e.validate(e.state);if(e.schema)if(ke(e.schema))t=t.concat(await Ce(e.state,e.schema));else if(Ee(e.schema))t=t.concat(await Ie(e.state,e.schema));else if(Ue(e.schema))t=t.concat(await qe(e.state,e.schema));else if(ze(e.schema))t=t.concat(await Ne(e.state,e.schema));else throw new Error("Form validation failed: Unsupported form schema");return t}async function v(t,a={silent:!1}){let u=t;if(t&&!Array.isArray(t)&&(u=[t]),u){const i=l.value.filter(h=>!u.includes(h.path)),_=(await y()).filter(h=>u.includes(h.path));l.value=i.concat(_)}else l.value=await y();if(l.value.length>0){if(a.silent)return!1;throw new B(`Form validation failed: ${JSON.stringify(l.value,null,2)}`)}return e.state}async function p(t){var u;const a=t;try{(u=e.validateOn)!=null&&u.includes("submit")&&await v();const i={...a,data:e.state};n("submit",i)}catch(i){if(!(i instanceof B))throw i;const _={...a,errors:l.value.map(h=>({...h,id:d.value[h.path]}))};n("error",_)}}return o({validate:v,errors:l,setErrors(t,a){l.value=t,a?l.value=l.value.filter(u=>u.path!==a).concat(t):l.value=t},async submit(){await p(new Event("submit"))},getErrors(t){return t?l.value.filter(a=>a.path===t):l.value},clear(t){t?l.value=l.value.filter(a=>a.path!==t):l.value=[]}}),{onSubmit:p}}});function Ee(e){return e.validate&&e.__isYupSchema__}function Be(e){return e.inner!==void 0}async function Ie(e,o){try{return await o.validate(e,{abortEarly:!1}),[]}catch(n){if(Be(n))return n.inner.map(r=>({path:r.path??"",message:r.message}));throw n}}function ke(e){return e.parse!==void 0}async function Ce(e,o){const n=await o.safeParseAsync(e);return n.success===!1?n.error.issues.map(r=>({path:r.path.join("."),message:r.message})):[]}function Ue(e){return e.validateAsync!==void 0&&e.id!==void 0}function je(e){return e.isJoi===!0}async function qe(e,o){try{return await o.validateAsync(e,{abortEarly:!1}),[]}catch(n){if(je(n))return n.details.map(r=>({path:r.path.join("."),message:r.message}));throw n}}function ze(e){return e._parse!==void 0}async function Ne(e,o){const n=await o._parse(e);return n.issues?n.issues.map(r=>{var c;return{path:((c=r.path)==null?void 0:c.map(l=>l.key).join("."))||"",message:r.message}}):[]}function Te(e,o,n,r,c,l){return $(),A("form",{onSubmit:o[0]||(o[0]=ue((...d)=>e.onSubmit&&e.onSubmit(...d),["prevent"]))},[D(e.$slots,"default")],32)}const Ae=T(Oe,[["render",Te]]),Me={class:"flex flex-col lg:flex-row"},Re={class:"w-full"},Fe={class:"w-full flex items-start justify-center flex-col"},De=I({__name:"EnterpriseSupportFormSection",props:{form:{type:Object,default:()=>({})},call:{type:Object,default:()=>({})}},setup(e){const o=de(),n=w(!1),r=w(),c=w(),l=ce({name:void 0,email:void 0,company:void 0,body:void 0}),d=w(!1),y=F(()=>!!(l.name&&l.email&&l.company&&l.body&&c.value)),v=t=>{const a=[];return t.name||a.push({path:"name",message:"Required"}),t.email||a.push({path:"email",message:"Required"}),t.company||a.push({path:"company",message:"Required"}),t.body||a.push({path:"body",message:"Required"}),a.length||(d.value=!0),a};async function p(t){t.data&&(n.value||!y.value||(n.value=!0,await $fetch("https://api.nuxt.com/support/contact",{method:"POST",body:{...t.data,token:c.value}}).then(()=>{l.company="",l.name="",l.email="",l.body="",d.value=!1,o.add({title:"Email sent",description:"We will do everything possible to respond to you as quickly as possible",color:"green"})}).catch(a=>{var i;const u=((i=a.data)==null?void 0:i.message)||"Something went wrong. Please try again later.";o.add({title:"Email sending failed",description:u,color:"red"})}).finally(()=>{var a;n.value=!1,(a=r.value)==null||a.reset()})))}return(t,a)=>{const u=pe,i=ye,_=Ve,h=$e,k=ve,O=be,C=Ae,s=ge,b=he,V=we;return $(),A("div",Me,[z("div",Re,[m(s,{ui:{background:"form-bg",body:{base:"flex flex-col space-y-6 w-full",padding:"px-4 py-5 sm:p-8"}}},{default:S(()=>[m(C,{validate:v,state:f(l),class:"space-y-6",onSubmit:p},{default:S(()=>[m(i,{label:e.form.name.label,name:"name",required:""},{default:S(()=>[m(u,{modelValue:f(l).name,"onUpdate:modelValue":a[0]||(a[0]=g=>f(l).name=g),placeholder:e.form.name.placeholder},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),m(i,{label:e.form.email.label,name:"email",required:""},{default:S(()=>[m(u,{modelValue:f(l).email,"onUpdate:modelValue":a[1]||(a[1]=g=>f(l).email=g),type:"email",placeholder:e.form.email.placeholder},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),m(i,{label:e.form.company.label,name:"company",required:""},{default:S(()=>[m(u,{modelValue:f(l).company,"onUpdate:modelValue":a[2]||(a[2]=g=>f(l).company=g),placeholder:e.form.company.placeholder},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),m(i,{label:e.form.body.label,name:"body",required:""},{default:S(()=>[m(_,{modelValue:f(l).body,"onUpdate:modelValue":a[3]||(a[3]=g=>f(l).body=g),autoresize:"",placeholder:e.form.body.placeholder,rows:6},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),m(k,null,{default:S(()=>[f(d)?($(),J(h,{key:0,ref_key:"turnstile",ref:r,modelValue:f(c),"onUpdate:modelValue":a[4]||(a[4]=g=>me(c)?c.value=g:null),options:{theme:t.$colorMode.value}},null,8,["modelValue","options"])):fe("",!0)]),_:1}),m(O,N(e.form.button,{type:"submit",color:"gray",class:"w-fit pt-2",loading:f(n),disabled:!f(y)}),null,16,["loading","disabled"])]),_:1},8,["state"])]),_:1})]),m(b,{label:"OR",color:"gray",orientation:"vertical",class:"hidden lg:flex w-[40%] py-16",ui:{label:"text-xl py-8"}}),m(b,{label:"OR",color:"gray",class:"lg:hidden py-16",ui:{label:"text-xl py-8"}}),z("div",Fe,[m(V,{value:e.call.description,class:"prose dark:prose-invert"},null,8,["value"]),m(O,N({class:"mt-8",color:"gray"},e.call.button),null,16)])])}}}),Ge=T(De,[["__scopeId","data-v-de5fdf2a"]]);export{Ge as default};
