import{_ as F}from"./DoouizDA.js";import{v as w,u as G,q as R,K as p,aq as H,s as $,ar as q,d as J,H as U,J as O,b as d,D as h,w as i,L as W,M as I,g as c,a8 as K,a9 as V,N as _,c as j,P as X,F as Y,an as Z,ac as ee,ad as te,ae as re,U as ae,W as ne}from"./D5zTXdpo.js";import{_ as oe}from"./DlCRx32L.js";import{_ as se}from"./C3KY3KCB.js";import{_ as le}from"./P8OI6xah.js";import{_ as ie}from"./DU9-XMAR.js";const ce=()=>{const o=w(),s=G(),n=R("enterprise-agencies",()=>[]);async function f(){if(!n.value.length)try{const t=await $("/enterprise/agencies").where({_extension:"md"}).find();n.value=t.map(r=>({...r,services:(r.services||[]).map(e=>({key:q(e),label:e})),regions:(r.regions||[]).map(e=>({key:q(e),label:e})),location:r.location?{key:q(r.location),label:r.location}:null}))}catch(t){return n.value=[],t}}const y=p(()=>[...n.value].filter(t=>!(l.value&&!t.services.find(r=>{var e;return r.key===((e=l.value)==null?void 0:e.key)})||m.value&&!t.regions.find(r=>{var e;return r.key===((e=m.value)==null?void 0:e.key)})))),k=p(()=>{const t=new Set;return n.value.flatMap(e=>e.services.filter(a=>t.has(a.key)?!1:(t.add(a.key),!0))).map(e=>({...e,exactQuery:!0,to:{name:"enterprise-agencies",query:{...o.query,service:e.key},state:{smooth:"#smooth"}},click:a=>{o.query.service===e.key&&(a.preventDefault(),s.replace({query:{...o.query,service:void 0}}))}})).sort((e,a)=>e.label.localeCompare(a.label))}),b=p(()=>[...new Set(n.value.map(t=>t.location))].map(t=>({key:t.key,label:t.label,exactQuery:!0,to:{name:"enterprise-agencies",query:{...o.query,location:t.key},state:{smooth:"#smooth"}},click:r=>{o.query.location===t.key&&(r.preventDefault(),s.replace({query:{...o.query,location:void 0}}))}})).sort((t,r)=>t.label.localeCompare(r.label))),v=p(()=>{const t=new Set;return n.value.flatMap(e=>e.regions.filter(a=>t.has(a.key)?!1:(t.add(a.key),!0))).map(e=>({key:e.key,label:e.label,exactQuery:!0,to:{name:"enterprise-agencies",query:{...o.query,region:e.key},state:{smooth:"#smooth"}},click:a=>{o.query.region===e.key&&(a.preventDefault(),s.replace({query:{...o.query,region:void 0}}))}})).sort((e,a)=>e.label.localeCompare(a.label))}),l=p(()=>k.value.find(t=>t.key===o.query.service)),m=p(()=>v.value.find(t=>t.key===o.query.region)),g=p(()=>H(n.value));return{fetchList:f,filteredAgencies:y,services:k,locations:b,regions:v,selectedService:l,selectedRegion:m,adPartner:g}},ye=J({__name:"index",async setup(o){var t,r;let s,n;const f=w(),{filteredAgencies:y,fetchList:k,services:b,regions:v}=ce(),{data:l}=([s,n]=U(()=>W(f.path,()=>$(f.path).findOne(),"$ADLafnepTD")),s=await s,n(),s),m=((t=l.value.head)==null?void 0:t.title)||l.value.title,g=((r=l.value.head)==null?void 0:r.description)||l.value.description;return O({titleTemplate:"%s · Enterprise",title:m,description:g,ogDescription:g,ogTitle:`${m} · Enterprise`}),[s,n]=U(()=>k()),await s,n(),(e,a)=>{const A=F,P=Z,B=oe,D=se,S=ee,L=te,M=re,x=ae,E=le,N=ie,Q=ne,T=I;return d(),h(T,null,{default:i(()=>[c(A,K(V(_(l))),null,16),c(Q,{id:"smooth",class:"pt-20 -mt-20"},{left:i(()=>[c(B,null,{default:i(()=>[c(P,{links:[{label:"Technical Expertise",disabled:!0,children:_(b)},{label:"Locations",disabled:!0,children:_(v)}]},null,8,["links"])]),_:1})]),default:i(()=>[c(N,null,{default:i(()=>{var C;return[(C=_(y))!=null&&C.length?(d(),h(M,{key:0},{default:i(()=>[(d(!0),j(Y,null,X(_(y),(u,z)=>(d(),h(L,{key:z,to:u._path,title:u.title,description:u.description,ui:{divide:"",footer:{padding:"pt-0"},title:"text-lg",description:"line-clamp-3"}},{icon:i(()=>[c(D,{light:u.logo.light,dark:u.logo.dark,size:"lg",ui:{rounded:"rounded-sm"}},null,8,["light","dark"])]),footer:i(()=>[c(S,{label:u.location.label,color:"gray"},null,8,["label"])]),_:2},1032,["to","title","description"]))),128))]),_:1})):(d(),h(E,{key:1,label:"No agency matches your criteria for now."},{default:i(()=>[c(x,{label:"Clear filters",color:"white","trailing-icon":"i-ph-x-circle",size:"md",onClick:a[0]||(a[0]=u=>e.$router.replace({query:{}}))}),c(x,{to:"https://docs.google.com/forms/d/e/1FAIpQLSf85qskit5QqmGJcruGkGF0U7240Bh9MeN0pHB18UiOMWC8dA/viewform",target:"_blank",color:"black",size:"md",label:"Submit my agency"})]),_:1}))]}),_:1})]),_:1})]),_:1})}}});export{ye as default};
