{"_path":"/blog/v3-7","_dir":"blog","_draft":false,"_partial":false,"_locale":"","title":"Nuxt 3.7","description":"Nuxt 3.7 is out, bringing a new CLI, native web streams and response, rendering optimisations, async context support - and much more.","navigation":false,"image":"/assets/blog/v3.7.png","authors":[{"name":"Daniel Roe","avatarUrl":"https://github.com/danielroe.png","link":"https://twitter.com/danielcroe","twitter":"danielcroe"}],"date":"2023-08-25T00:00:00.000Z","category":"Release","body":{"type":"root","children":[{"type":"element","tag":"h3","props":{"id":"a-new-cli"},"children":[{"type":"text","value":"üê£ A New CLI"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"We've refactored "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"nuxi"}]},{"type":"text","value":" using "},{"type":"element","tag":"a","props":{"href":"http://github.com/unjs/citty","rel":["nofollow"]},"children":[{"type":"text","value":"unjs/citty"}]},{"type":"text","value":" and this marks the first Nuxt release that depends on the new version, safely in its own repository. We have grand plans for this - check out some of the features + roadmap discussions in "},{"type":"element","tag":"a","props":{"href":"https://github.com/nuxt/cli","rel":["nofollow"]},"children":[{"type":"text","value":"nuxt/cli"}]},{"type":"text","value":" and please feel free to contribute!"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://github.com/nuxt/cli/discussions/3","target":"_blank"},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Project Goals"}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://github.com/nuxt/cli/discussions/4","target":"_blank"},"children":[{"type":"text","value":"Feedbacks and Ideas"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://github.com/nuxt/cli/discussions/7","target":"_blank"},"children":[{"type":"text","value":"The journey of Nuxt CLI Generations"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Nuxi is now decoupled from the main "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"nuxt"}]},{"type":"text","value":" version - we plan to iterate and release nuxi more quickly in future so you can expect new things coming soon!"}]},{"type":"element","tag":"h3","props":{"id":"Ô∏è-native-web-streams-and-response"},"children":[{"type":"text","value":"üï∏Ô∏è Native Web Streams and "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"Response"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"With improvements in "},{"type":"element","tag":"a","props":{"href":"https://github.com/unjs/h3","rel":["nofollow"]},"children":[{"type":"text","value":"unjs/h3"}]},{"type":"text","value":" and "},{"type":"element","tag":"a","props":{"href":"https://github.com/unjs/nitro","rel":["nofollow"]},"children":[{"type":"text","value":"unjs/nitro"}]},{"type":"text","value":", it's now possible to directly return a "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"Response"}]},{"type":"text","value":" object from server routes, meaning it's "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"also"}]},{"type":"text","value":" possible to return and handle streams natively in Nuxt."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"üëâ Check out the full detail in the "},{"type":"element","tag":"a","props":{"href":"https://github.com/unjs/h3/releases","rel":["nofollow"]},"children":[{"type":"text","value":"unjs/h3"}]},{"type":"text","value":" and "},{"type":"element","tag":"a","props":{"href":"https://github.com/unjs/nitro/releases","rel":["nofollow"]},"children":[{"type":"text","value":"unjs/nitro"}]},{"type":"text","value":" release notes."}]},{"type":"element","tag":"h3","props":{"id":"html-rendering-optimisations"},"children":[{"type":"text","value":"üî• HTML Rendering Optimisations"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This release comes with a couple of improvements in rendering HTML responses from the server. We now determine whether to preload/prefetch resources at build time (so you can customise this in the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"build:manifest"}]},{"type":"text","value":" hook). We also now manage rendering the HTML for them directly in "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"unhead"}]},{"type":"text","value":" ("},{"type":"element","tag":"a","props":{"href":"https://github.com/nuxt/nuxt/pull/22179","rel":["nofollow"]},"children":[{"type":"text","value":"#22179"}]},{"type":"text","value":"), which means you can configure the "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"order"}]},{"type":"text","value":" for "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"<link>"}]},{"type":"text","value":", "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"<meta>"}]},{"type":"text","value":", "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"<script>"}]},{"type":"text","value":", "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"<style>"}]},{"type":"text","value":", and more. And - in our preliminary testing - it's even faster!"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"It's possible to opt-in to upcoming head improvements with the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"experimental.headNext"}]},{"type":"text","value":" flag. This currently includes a new ordering algorithm based on "},{"type":"element","tag":"a","props":{"href":"https://github.com/rviscomi/capo.js","rel":["nofollow"]},"children":[{"type":"text","value":"capo.js"}]},{"type":"text","value":" ("},{"type":"element","tag":"a","props":{"href":"https://github.com/nuxt/nuxt/pull/22431","rel":["nofollow"]},"children":[{"type":"text","value":"#22431"}]},{"type":"text","value":") and allows enabling future optimisations as they are released in "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"unhead"}]},{"type":"text","value":":"}]},{"type":"element","tag":"pre","props":{"className":"language-ts shiki shiki-themes material-theme-lighter material-theme-lighter material-theme-palenight","code":"export default defineNuxtConfig({\n  experimental: {\n    headNext: true\n  }\n})\n","language":"ts","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#39ADB5;--shiki-dark:#89DDFF;--shiki-light-font-style:italic;--shiki-default-font-style:italic;--shiki-dark-font-style:italic"},"children":[{"type":"text","value":"export"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#39ADB5;--shiki-dark:#89DDFF;--shiki-light-font-style:italic;--shiki-default-font-style:italic;--shiki-dark-font-style:italic"},"children":[{"type":"text","value":" default"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#6182B8;--shiki-default:#6182B8;--shiki-dark:#82AAFF"},"children":[{"type":"text","value":" defineNuxtConfig"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#90A4AE;--shiki-default:#90A4AE;--shiki-dark:#BABED8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#39ADB5;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":"{\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#E53935;--shiki-default:#E53935;--shiki-dark:#F07178"},"children":[{"type":"text","value":"  experimental"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#39ADB5;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#39ADB5;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#E53935;--shiki-default:#E53935;--shiki-dark:#F07178"},"children":[{"type":"text","value":"    headNext"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#39ADB5;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#FF5370;--shiki-default:#FF5370;--shiki-dark:#FF9CAC"},"children":[{"type":"text","value":" true\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#39ADB5;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#39ADB5;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#90A4AE;--shiki-default:#90A4AE;--shiki-dark:#BABED8"},"children":[{"type":"text","value":")\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"We'd love your thoughts - you can respond with any issues/feedback in "},{"type":"element","tag":"a","props":{"href":"https://github.com/nuxt/nuxt/discussions/22632","rel":["nofollow"]},"children":[{"type":"text","value":"this discussion"}]},{"type":"text","value":"."}]},{"type":"element","tag":"h3","props":{"id":"Ô∏è-build-environment-shortcuts"},"children":[{"type":"text","value":"üõ†Ô∏è Build Environment Shortcuts"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"In your Nuxt config you can now use "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"$client"}]},{"type":"text","value":" and "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"$server"}]},{"type":"text","value":" shortcuts to easily define configuration that is specific to just the Vite client/server ("},{"type":"element","tag":"a","props":{"href":"https://github.com/nuxt/nuxt/pull/22302","rel":["nofollow"]},"children":[{"type":"text","value":"#22302"}]},{"type":"text","value":") or webpack client/server ("},{"type":"element","tag":"a","props":{"href":"https://github.com/nuxt/nuxt/pull/22304","rel":["nofollow"]},"children":[{"type":"text","value":"#22304"}]},{"type":"text","value":") builds. This previously was only possible with the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"vite:extendConfig"}]},{"type":"text","value":" and "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"webpack:config"}]},{"type":"text","value":" hooks."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"For example:"}]},{"type":"element","tag":"pre","props":{"className":"language-ts shiki shiki-themes material-theme-lighter material-theme-lighter material-theme-palenight","code":"export default defineNuxtConfig({\n  vite: {\n    $client: {\n      build: {\n        rollupOptions: {\n          output: {\n            chunkFileNames: '_nuxt/[hash].js',\n            assetFileNames: '_nuxt/[hash][extname]',\n            entryFileNames: '_nuxt/[hash].js'\n          }\n        }\n      }\n    }\n  }\n})\n","language":"ts","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#39ADB5;--shiki-dark:#89DDFF;--shiki-light-font-style:italic;--shiki-default-font-style:italic;--shiki-dark-font-style:italic"},"children":[{"type":"text","value":"export"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#39ADB5;--shiki-dark:#89DDFF;--shiki-light-font-style:italic;--shiki-default-font-style:italic;--shiki-dark-font-style:italic"},"children":[{"type":"text","value":" default"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#6182B8;--shiki-default:#6182B8;--shiki-dark:#82AAFF"},"children":[{"type":"text","value":" defineNuxtConfig"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#90A4AE;--shiki-default:#90A4AE;--shiki-dark:#BABED8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#39ADB5;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":"{\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#E53935;--shiki-default:#E53935;--shiki-dark:#F07178"},"children":[{"type":"text","value":"  vite"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#39ADB5;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#39ADB5;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#E53935;--shiki-default:#E53935;--shiki-dark:#F07178"},"children":[{"type":"text","value":"    $client"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#39ADB5;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#39ADB5;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#E53935;--shiki-default:#E53935;--shiki-dark:#F07178"},"children":[{"type":"text","value":"      build"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#39ADB5;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#39ADB5;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#E53935;--shiki-default:#E53935;--shiki-dark:#F07178"},"children":[{"type":"text","value":"        rollupOptions"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#39ADB5;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#39ADB5;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#E53935;--shiki-default:#E53935;--shiki-dark:#F07178"},"children":[{"type":"text","value":"          output"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#39ADB5;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#39ADB5;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#E53935;--shiki-default:#E53935;--shiki-dark:#F07178"},"children":[{"type":"text","value":"            chunkFileNames"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#39ADB5;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#39ADB5;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":" '"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#91B859;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":"_nuxt/[hash].js"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#39ADB5;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":"'"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#39ADB5;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#E53935;--shiki-default:#E53935;--shiki-dark:#F07178"},"children":[{"type":"text","value":"            assetFileNames"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#39ADB5;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#39ADB5;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":" '"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#91B859;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":"_nuxt/[hash][extname]"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#39ADB5;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":"'"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#39ADB5;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#E53935;--shiki-default:#E53935;--shiki-dark:#F07178"},"children":[{"type":"text","value":"            entryFileNames"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#39ADB5;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#39ADB5;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":" '"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#91B859;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":"_nuxt/[hash].js"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#39ADB5;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":"'\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#39ADB5;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":"          }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#39ADB5;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":"        }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#39ADB5;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":"      }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#39ADB5;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#39ADB5;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#39ADB5;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#90A4AE;--shiki-default:#90A4AE;--shiki-dark:#BABED8"},"children":[{"type":"text","value":")\n"}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"Ô∏è-vite-44"},"children":[{"type":"text","value":"‚ö°Ô∏è Vite 4.4"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"We've chosen to unpin Vite from minor versions, meaning whenever Vite releases a new feature version you can opt-in straight away. Vite 4.4 brings a lot of exciting things, including experimental Lightning CSS support - and much more!"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"üëâ Check out the "},{"type":"element","tag":"a","props":{"href":"https://github.com/vitejs/vite/blob/main/packages/vite/CHANGELOG.md#440-2023-07-06","rel":["nofollow"]},"children":[{"type":"text","value":"Vite release notes"}]},{"type":"text","value":" for more."}]},{"type":"element","tag":"h3","props":{"id":"typescript-updates"},"children":[{"type":"text","value":"üí™ TypeScript Updates"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"We now use purely relative paths in the generated "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"tsconfig.json"}]},{"type":"text","value":" instead of setting a "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"baseUrl"}]},{"type":"text","value":". This means better support for dev environments like docker images where the absolute path may not match your IDE ("},{"type":"element","tag":"a","props":{"href":"https://github.com/nuxt/nuxt/pull/22410","rel":["nofollow"]},"children":[{"type":"text","value":"#22410"}]},{"type":"text","value":")."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"We also set a couple of additional compiler flag defaults to match Vite/TS recommendations ("},{"type":"element","tag":"a","props":{"href":"https://github.com/nuxt/nuxt/pull/22468","rel":["nofollow"]},"children":[{"type":"text","value":"#22468"}]},{"type":"text","value":")."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Plus, you should now get type hinted access to layouts in "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"setPageLayout"}]},{"type":"text","value":" and also in "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"<NuxtLayout name>"}]},{"type":"text","value":" ("},{"type":"element","tag":"a","props":{"href":"https://github.com/nuxt/nuxt/pull/22362","rel":["nofollow"]},"children":[{"type":"text","value":"#22363"}]},{"type":"text","value":")."}]},{"type":"element","tag":"h3","props":{"id":"async-context-support"},"children":[{"type":"text","value":"ü¶Ñ Async Context support"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"If you've ever got an issue with 'Nuxt context unavailable' this might be one for you. We now support  native async context for Bun and Node under an experimental flag, in both Nuxt and Nitro ("},{"type":"element","tag":"a","props":{"href":"https://github.com/nuxt/nuxt/pull/20918","rel":["nofollow"]},"children":[{"type":"text","value":"#20918"}]},{"type":"text","value":")."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This enables using Nuxt composables on the server "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"without"}]},{"type":"text","value":" needing to ensure they are being called directly in a setup function. It also allows the same in Nitro, with a new "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"useEvent()"}]},{"type":"text","value":" utility that is usable in server routes."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"To try it out, you can enable "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"experimental.asyncContext"}]},{"type":"text","value":":"}]},{"type":"element","tag":"pre","props":{"className":"language-ts shiki shiki-themes material-theme-lighter material-theme-lighter material-theme-palenight","code":"export default defineNuxtConfig({\n  experimental: {\n    asyncContext: true\n  }\n})\n","language":"ts","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#39ADB5;--shiki-dark:#89DDFF;--shiki-light-font-style:italic;--shiki-default-font-style:italic;--shiki-dark-font-style:italic"},"children":[{"type":"text","value":"export"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#39ADB5;--shiki-dark:#89DDFF;--shiki-light-font-style:italic;--shiki-default-font-style:italic;--shiki-dark-font-style:italic"},"children":[{"type":"text","value":" default"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#6182B8;--shiki-default:#6182B8;--shiki-dark:#82AAFF"},"children":[{"type":"text","value":" defineNuxtConfig"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#90A4AE;--shiki-default:#90A4AE;--shiki-dark:#BABED8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#39ADB5;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":"{\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#E53935;--shiki-default:#E53935;--shiki-dark:#F07178"},"children":[{"type":"text","value":"  experimental"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#39ADB5;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#39ADB5;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#E53935;--shiki-default:#E53935;--shiki-dark:#F07178"},"children":[{"type":"text","value":"    asyncContext"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#39ADB5;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#FF5370;--shiki-default:#FF5370;--shiki-dark:#FF9CAC"},"children":[{"type":"text","value":" true\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#39ADB5;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#39ADB5;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#90A4AE;--shiki-default:#90A4AE;--shiki-dark:#BABED8"},"children":[{"type":"text","value":")\n"}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"watcher-updates"},"children":[{"type":"text","value":"üëì Watcher Updates"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"We've fixed a couple of issues with watchers, meaning that you should need to restart your server less often - and you should see a significant performance increase if you are using layers."}]},{"type":"element","tag":"h3","props":{"id":"Ô∏è-nitro-26"},"children":[{"type":"text","value":"‚öóÔ∏è Nitro 2.6"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"There lots more exciting features coming directly from Nitro 2.6, including smaller, lighter servers and new persistent data storage in a "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":".data"}]},{"type":"text","value":" directory."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"üëâ Read more in "},{"type":"element","tag":"a","props":{"href":"https://unjs.io/blog/2023-08-25-nitro-2.6","rel":["nofollow"]},"children":[{"type":"text","value":"the full release article"}]},{"type":"text","value":"."}]},{"type":"element","tag":"h2","props":{"id":"upgrading"},"children":[{"type":"text","value":"‚úÖ Upgrading"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"As usual, our recommendation for upgrading is to run:"}]},{"type":"element","tag":"pre","props":{"className":"language-sh shiki shiki-themes material-theme-lighter material-theme-lighter material-theme-palenight","code":"npx nuxi upgrade --force\n","language":"sh","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#E2931D;--shiki-default:#E2931D;--shiki-dark:#FFCB6B"},"children":[{"type":"text","value":"npx"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#91B859;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" nuxi"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#91B859;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" upgrade"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#91B859;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" --force\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This will refresh your lockfile as well, and ensures that you pull in updates from other dependencies that Nuxt relies on, particularly in the "},{"type":"element","tag":"a","props":{"href":"https://github.com/unjs","rel":["nofollow"]},"children":[{"type":"text","value":"unjs"}]},{"type":"text","value":" ecosystem."}]},{"type":"element","tag":"h2","props":{"id":"full-changelog"},"children":[{"type":"text","value":"üìÉ Full changelog"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Read the full release notes on "},{"type":"element","tag":"a","props":{"href":"https://github.com/nuxt/nuxt/releases/tag/v3.7.0","rel":["nofollow"]},"children":[{"type":"text","value":"https://github.com/nuxt/nuxt/releases/tag/v3.7.0"}]}]},{"type":"element","tag":"style","props":{},"children":[{"type":"text","value":"html .light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html.light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"a-new-cli","depth":3,"text":"üê£ A New CLI"},{"id":"Ô∏è-native-web-streams-and-response","depth":3,"text":"üï∏Ô∏è Native Web Streams and Response"},{"id":"html-rendering-optimisations","depth":3,"text":"üî• HTML Rendering Optimisations"},{"id":"Ô∏è-build-environment-shortcuts","depth":3,"text":"üõ†Ô∏è Build Environment Shortcuts"},{"id":"Ô∏è-vite-44","depth":3,"text":"‚ö°Ô∏è Vite 4.4"},{"id":"typescript-updates","depth":3,"text":"üí™ TypeScript Updates"},{"id":"async-context-support","depth":3,"text":"ü¶Ñ Async Context support"},{"id":"watcher-updates","depth":3,"text":"üëì Watcher Updates"},{"id":"Ô∏è-nitro-26","depth":3,"text":"‚öóÔ∏è Nitro 2.6"},{"id":"upgrading","depth":2,"text":"‚úÖ Upgrading"},{"id":"full-changelog","depth":2,"text":"üìÉ Full changelog"}]}},"_type":"markdown","_id":"content:7.blog:15.v3-7.md","_source":"content","_file":"7.blog/15.v3-7.md","_extension":"md"}