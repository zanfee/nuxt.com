{"_path":"/blog/going-full-static","_dir":"blog","_draft":false,"_partial":false,"_locale":"","title":"Going Full Static","description":"Long awaited features for JAMstack fans has been shipped in v2.13: full static export, improved smart prefetching, integrated crawler, faster re-deploy, built-in web server and new target option for config ‚ö°Ô∏è","image":"/assets/blog/going-full-static.png","date":"2020-06-18T00:00:00.000Z","authors":[{"name":"Sebastien Chopin","avatarUrl":"https://github.com/atinux.png","link":"https://twitter.com/Atinux"}],"category":"Release","body":{"type":"root","children":[{"type":"element","tag":"h2","props":{"id":"too-long-to-read"},"children":[{"type":"text","value":"Too long to read"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Upgrade nuxt to "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"2.14.0"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Set "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"target: 'static'"}]},{"type":"text","value":" in your "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"nuxt.config.js"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Run "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"nuxt generate"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"That's it ‚ú®"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"Bonus: you can run "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"nuxt start"}]},{"type":"text","value":" to run a local server serving your generated static application."}]}]},{"type":"element","tag":"video","props":{":autoplay":"true",":controls":"true","autoPlay":true,"controls":true,"poster":"https://res.cloudinary.com/nuxt/video/upload/v1588095794/nuxt-full-static_rnnbvm.jpg"},"children":[{"type":"element","tag":"source","props":{"src":"https://res.cloudinary.com/nuxt/video/upload/v1588095794/nuxt-full-static_rnnbvm.webm","type":"video/webm"},"children":[]},{"type":"element","tag":"source","props":{"src":"https://res.cloudinary.com/nuxt/video/upload/v1588095794/nuxt-full-static_rnnbvm.mp4","type":"video/mp4"},"children":[]},{"type":"element","tag":"source","props":{"src":"https://res.cloudinary.com/nuxt/video/upload/v1588095794/nuxt-full-static_rnnbvm.ogg","type":"video/ogg"},"children":[]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Note: in this video we are using "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"nuxt export"}]},{"type":"text","value":" which has been deprecated in favor of "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"nuxt generate"}]},{"type":"text","value":"."}]},{"type":"element","tag":"h2","props":{"id":"table-of-contents"},"children":[{"type":"text","value":"Table of Contents"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"#too-long-to-read"},"children":[{"type":"text","value":"Too long to read"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"#table-of-contents"},"children":[{"type":"text","value":"Table of Contents"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"#history"},"children":[{"type":"text","value":"History"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"#current-issues"},"children":[{"type":"text","value":"Current issues"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"#new-config-option-target"},"children":[{"type":"text","value":"New config option: "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"target"}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"#smarter-nuxt-generate"},"children":[{"type":"text","value":"Smarter "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"nuxt generate"}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"#crazy-fast-static-applications"},"children":[{"type":"text","value":"Crazy fast static applications"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"#crawler-integrated"},"children":[{"type":"text","value":"Crawler integrated"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"#faster-re-deploy"},"children":[{"type":"text","value":"Faster re-deploy"}]}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"#smarter-nuxt-start"},"children":[{"type":"text","value":"Smarter "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"nuxt start"}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"#preview-mode"},"children":[{"type":"text","value":"Preview mode"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"#commands"},"children":[{"type":"text","value":"Commands"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"#what-to-do-next"},"children":[{"type":"text","value":"What to do next"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"history"},"children":[{"type":"text","value":"History"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Nuxt had the static generation feature with "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"nuxt generate"}]},{"type":"text","value":" since "},{"type":"element","tag":"a","props":{"href":"https://github.com/nuxt/nuxt.js/releases/tag/v0.3.2","rel":["nofollow"]},"children":[{"type":"text","value":"v0.3.2"}]},{"type":"text","value":" (November 2016), since then we have improved it in multiple ways but never achieved full static generation. Today I am excited to announce that full static export is now possible with Nuxt 2.13."}]},{"type":"element","tag":"h2","props":{"id":"current-issues"},"children":[{"type":"text","value":"Current issues"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"nuxt generate"}]},{"type":"text","value":" is mostly pre-rendering, when you navigate client-side, "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"asyncData"}]},{"type":"text","value":" and "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"fetch"}]},{"type":"text","value":" are called, "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"making a request to your API"}]},{"type":"text","value":". A lot of users asked to support a \"full static\" mode, meaning to not call these 2 hooks on navigation, since the next page has been already pre-rendered."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Also, the developer experience is not optimal:"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"You have access to "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"req"}]},{"type":"text","value":" or "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"res"}]},{"type":"text","value":" on SSR but not when running "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"nuxt generate"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"process.static"}]},{"type":"text","value":" is "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"true"}]},{"type":"text","value":" only when running "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"nuxt generate"}]},{"type":"text","value":", making it slow to develop Nuxt modules or plugins for static generation"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"You have to specify all your "},{"type":"element","tag":"a","props":{"href":"https://v2.nuxt.com/docs/features/file-system-routing#dynamic-routes","rel":["nofollow"]},"children":[{"type":"text","value":"dynamic routes"}]},{"type":"text","value":" in "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"generate.routes"}]},{"type":"text","value":", making it harder since you don't have access to nuxt modules there."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"You cannot test the "},{"type":"element","tag":"a","props":{"href":"https://v2.nuxt.com/docs/concepts/static-site-generation#spa-fallback","rel":["nofollow"]},"children":[{"type":"text","value":"SPA fallback"}]},{"type":"text","value":" in development, the fallback is a client-only version of your Nuxt application that loads when hitting a 404 page"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"nuxt generate"}]},{"type":"text","value":" runs "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"nuxt build"}]},{"type":"text","value":" by default, making it slower to generate your website if only your content changed"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Note that it was possible to have full static support with "},{"type":"element","tag":"a","props":{"href":"https://github.com/DreaMinder/nuxt-payload-extractor","rel":["nofollow"]},"children":[{"type":"text","value":"nuxt-payload-extractor"}]},{"type":"text","value":" module but it was more verbose to use and had limitations."}]},{"type":"element","tag":"h2","props":{"id":"new-config-option-target"},"children":[{"type":"text","value":"New config option: "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"target"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"To improve the user experience as well as telling Nuxt that you want to export your application to static hosting, we are introducing a "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"target"}]},{"type":"text","value":" option in your "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"nuxt.config.js"}]},{"type":"text","value":":"}]},{"type":"element","tag":"pre","props":{"className":"language-vue shiki shiki-themes material-theme-lighter material-theme-lighter material-theme-palenight","code":"<script setup>\n  import { ref, computed } from '#imports'\n\n  const count = ref(1)\n  const double = computed(() => count.value * 2)\n</script>\n","language":"vue","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#39ADB5;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#E53935;--shiki-default:#E53935;--shiki-dark:#F07178"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#9C3EDA;--shiki-default:#9C3EDA;--shiki-dark:#C792EA"},"children":[{"type":"text","value":" setup"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#39ADB5;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#39ADB5;--shiki-dark:#89DDFF;--shiki-light-font-style:italic;--shiki-default-font-style:italic;--shiki-dark-font-style:italic"},"children":[{"type":"text","value":"  import"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#39ADB5;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":" {"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#90A4AE;--shiki-default:#90A4AE;--shiki-dark:#BABED8"},"children":[{"type":"text","value":" ref"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#39ADB5;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#90A4AE;--shiki-default:#90A4AE;--shiki-dark:#BABED8"},"children":[{"type":"text","value":" computed"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#39ADB5;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":" }"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#39ADB5;--shiki-dark:#89DDFF;--shiki-light-font-style:italic;--shiki-default-font-style:italic;--shiki-dark-font-style:italic"},"children":[{"type":"text","value":" from"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#39ADB5;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":" '"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#91B859;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":"#imports"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#39ADB5;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":"'\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#9C3EDA;--shiki-default:#9C3EDA;--shiki-dark:#C792EA"},"children":[{"type":"text","value":"  const"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#90A4AE;--shiki-default:#90A4AE;--shiki-dark:#BABED8"},"children":[{"type":"text","value":" count "}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#39ADB5;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#6182B8;--shiki-default:#6182B8;--shiki-dark:#82AAFF"},"children":[{"type":"text","value":" ref"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#90A4AE;--shiki-default:#90A4AE;--shiki-dark:#BABED8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#F76D47;--shiki-default:#F76D47;--shiki-dark:#F78C6C"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#90A4AE;--shiki-default:#90A4AE;--shiki-dark:#BABED8"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#9C3EDA;--shiki-default:#9C3EDA;--shiki-dark:#C792EA"},"children":[{"type":"text","value":"  const"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#90A4AE;--shiki-default:#90A4AE;--shiki-dark:#BABED8"},"children":[{"type":"text","value":" double "}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#39ADB5;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#6182B8;--shiki-default:#6182B8;--shiki-dark:#82AAFF"},"children":[{"type":"text","value":" computed"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#90A4AE;--shiki-default:#90A4AE;--shiki-dark:#BABED8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#39ADB5;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":"()"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#9C3EDA;--shiki-default:#9C3EDA;--shiki-dark:#C792EA"},"children":[{"type":"text","value":" =>"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#90A4AE;--shiki-default:#90A4AE;--shiki-dark:#BABED8"},"children":[{"type":"text","value":" count"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#39ADB5;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#90A4AE;--shiki-default:#90A4AE;--shiki-dark:#BABED8"},"children":[{"type":"text","value":"value "}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#39ADB5;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":"*"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#F76D47;--shiki-default:#F76D47;--shiki-dark:#F78C6C"},"children":[{"type":"text","value":" 2"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#90A4AE;--shiki-default:#90A4AE;--shiki-dark:#BABED8"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#39ADB5;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#E53935;--shiki-default:#E53935;--shiki-dark:#F07178"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#39ADB5;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":">\n"}]}]}]}]},{"type":"element","tag":"important","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Full static doesn't work with "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"ssr: 'false'"}]},{"type":"text","value":" (which is the same as the deprecated "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"mode: 'spa'"}]},{"type":"text","value":") as this is used for client-side rendering only (Single Page Applications)."}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Running "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"nuxt dev"}]},{"type":"text","value":" with the static target will improve the developer experience:"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Remove "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"req"}]},{"type":"text","value":" & "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"res"}]},{"type":"text","value":" from context"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Fallback to client-side rendering on 404, errors and redirects (see "},{"type":"element","tag":"a","props":{"href":"https://v2.nuxt.com/docs/concepts/static-site-generation#spa-fallback","rel":["nofollow"]},"children":[{"type":"text","value":"SPA fallback"}]},{"type":"text","value":")"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"$route.query"}]},{"type":"text","value":" will always be equal to "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"{}"}]},{"type":"text","value":" on server-side rendering"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"process.static"}]},{"type":"text","value":" is "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"true"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"We are also exposing "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"process.target"}]},{"type":"text","value":" for modules author to add logic depending on the user target."}]},{"type":"element","tag":"h2","props":{"id":"smarter-nuxt-generate"},"children":[{"type":"text","value":"Smarter "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"nuxt generate"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Now with "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"v2.14.0"}]},{"type":"text","value":", you can use "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"nuxt generate"}]},{"type":"text","value":", it will smartly know if it has to build or not."}]},{"type":"element","tag":"h3","props":{"id":"crazy-fast-static-applications"},"children":[{"type":"text","value":"Crazy fast static applications"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"nuxt generate"}]},{"type":"text","value":" with "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"target: 'static'"}]},{"type":"text","value":" will pre-render all your pages to HTML and save a payload file in order to mock "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"asyncData"}]},{"type":"text","value":" and "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"fetch"}]},{"type":"text","value":" on client-side navigation, this means "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"no"}]},{"type":"text","value":" "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"more HTTP calls to your API on client-side navigation."}]},{"type":"text","value":" By extracting the page payload to a js file, "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"it also reduces the HTML size"}]},{"type":"text","value":" served as well as preloading it (from the "},{"type":"element","tag":"link","props":{},"children":[]},{"type":"text","value":" in the header) for optimal performance."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"We also improved the "},{"type":"element","tag":"a","props":{"href":"/blog/introducing-smart-prefetching"},"children":[{"type":"text","value":"smart prefetching"}]},{"type":"text","value":" when doing full static, it will also fetch the payloads, making navigation instant üëÄ"}]},{"type":"element","tag":"h3","props":{"id":"crawler-integrated"},"children":[{"type":"text","value":"Crawler integrated"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"On top of that, it also has a crawler inside, detecting every relative link and generating it:"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"If you want to exclude a bunch of routes, use the "},{"type":"element","tag":"a","props":{"href":"https://v2.nuxt.com/docs/configuration-glossary/configuration-generate#exclude","rel":["nofollow"]},"children":[{"type":"text","value":"generate.exclude"}]},{"type":"text","value":". You can keep using "},{"type":"element","tag":"a","props":{"href":"https://v2.nuxt.com/docs/configuration-glossary/configuration-generate#routes","rel":["nofollow"]},"children":[{"type":"text","value":"generate.routes"}]},{"type":"text","value":" to add extra routes that the crawler could not detect."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"To disable the crawler, set "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"generate.crawler: false"}]},{"type":"text","value":" in your "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"nuxt.config.js"}]}]},{"type":"element","tag":"h3","props":{"id":"faster-re-deploy"},"children":[{"type":"text","value":"Faster re-deploy"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"By separating "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"nuxt build"}]},{"type":"text","value":" and "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"nuxt export"}]},{"type":"text","value":", we are opening a new range of improvements: pre-render your pages only if you content has changed, this means: no webpack build ‚Üí faster re-deployments."}]},{"type":"element","tag":"h2","props":{"id":"smarter-nuxt-start"},"children":[{"type":"text","value":"Smarter "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"nuxt start"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Once you statically generated your Nuxt app into "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"dist/"}]},{"type":"text","value":", use "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"nuxt start"}]},{"type":"text","value":" to start a production HTTP server and serve your static app, supporting "},{"type":"element","tag":"a","props":{"href":"https://v2.nuxt.com/docs/concepts/static-site-generation#spa-fallback","rel":["nofollow"]},"children":[{"type":"text","value":"SPA Fallback"}]},{"type":"text","value":"."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This command is perfect to locally test your static application before pushing to your favorite static hosting provider."}]},{"type":"element","tag":"h2","props":{"id":"preview-mode"},"children":[{"type":"text","value":"Preview mode"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"We do support live preview out of the box to keep calling your API:"}]},{"type":"element","tag":"pre","props":{"className":"language-js shiki shiki-themes material-theme-lighter material-theme-lighter material-theme-palenight","code":"export default async function ({ query, enablePreview }) {\n  if (query.preview) {\n    enablePreview()\n  }\n}\n","filename":"plugins/preview.client.js","language":"js","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#39ADB5;--shiki-dark:#89DDFF;--shiki-light-font-style:italic;--shiki-default-font-style:italic;--shiki-dark-font-style:italic"},"children":[{"type":"text","value":"export"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#39ADB5;--shiki-dark:#89DDFF;--shiki-light-font-style:italic;--shiki-default-font-style:italic;--shiki-dark-font-style:italic"},"children":[{"type":"text","value":" default"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#9C3EDA;--shiki-default:#9C3EDA;--shiki-dark:#C792EA"},"children":[{"type":"text","value":" async"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#9C3EDA;--shiki-default:#9C3EDA;--shiki-dark:#C792EA"},"children":[{"type":"text","value":" function"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#39ADB5;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":" ({"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#90A4AE;--shiki-default:#90A4AE;--shiki-dark:#BABED8;--shiki-light-font-style:italic;--shiki-default-font-style:italic;--shiki-dark-font-style:italic"},"children":[{"type":"text","value":" query"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#39ADB5;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#90A4AE;--shiki-default:#90A4AE;--shiki-dark:#BABED8;--shiki-light-font-style:italic;--shiki-default-font-style:italic;--shiki-dark-font-style:italic"},"children":[{"type":"text","value":" enablePreview"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#39ADB5;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":" })"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#39ADB5;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#39ADB5;--shiki-dark:#89DDFF;--shiki-light-font-style:italic;--shiki-default-font-style:italic;--shiki-dark-font-style:italic"},"children":[{"type":"text","value":"  if"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#E53935;--shiki-default:#E53935;--shiki-dark:#F07178"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#90A4AE;--shiki-default:#90A4AE;--shiki-dark:#BABED8"},"children":[{"type":"text","value":"query"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#39ADB5;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#90A4AE;--shiki-default:#90A4AE;--shiki-dark:#BABED8"},"children":[{"type":"text","value":"preview"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#E53935;--shiki-default:#E53935;--shiki-dark:#F07178"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#39ADB5;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":"{\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#6182B8;--shiki-default:#6182B8;--shiki-dark:#82AAFF"},"children":[{"type":"text","value":"    enablePreview"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#E53935;--shiki-default:#E53935;--shiki-dark:#F07178"},"children":[{"type":"text","value":"()\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#39ADB5;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#39ADB5;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":"}\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"It will automatically refresh the page data (calling "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"nuxtServerInit"}]},{"type":"text","value":", "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"asyncData"}]},{"type":"text","value":" and "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"fetch"}]},{"type":"text","value":")."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"When the preview mode is activated, "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"asyncData"}]},{"type":"text","value":" and "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"fetch"}]},{"type":"text","value":" original methods will be called."}]},{"type":"element","tag":"h2","props":{"id":"commands"},"children":[{"type":"text","value":"Commands"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Depending of the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"target"}]},{"type":"text","value":", you can run these commands."}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"server"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"nuxt dev"}]},{"type":"text","value":": Start the development server"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"nuxt build"}]},{"type":"text","value":": Bundle your Nuxt application for production"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"nuxt start"}]},{"type":"text","value":": Start the production server"}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"static"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"nuxt dev"}]},{"type":"text","value":": Start the development server (static aware)"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"nuxt generate"}]},{"type":"text","value":": Bundle your Nuxt application for production if needed (static aware) and export your application to static HTML in "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"dist/"}]},{"type":"text","value":" directory"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"nuxt start"}]},{"type":"text","value":": Serve your production application from "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"dist/"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"what-to-do-next"},"children":[{"type":"text","value":"What to do next"}]},{"type":"element","tag":"read-more","props":{"target":"_blank","to":"https://v2.nuxt.com/tutorials/moving-from-nuxtjs-dotenv-to-runtime-config"},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Learn more about how to move from "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"@nuxtjs/dotenv"}]},{"type":"text","value":" to runtime config."}]}]},{"type":"element","tag":"style","props":{},"children":[{"type":"text","value":"html .light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html.light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"too-long-to-read","depth":2,"text":"Too long to read"},{"id":"table-of-contents","depth":2,"text":"Table of Contents"},{"id":"history","depth":2,"text":"History"},{"id":"current-issues","depth":2,"text":"Current issues"},{"id":"new-config-option-target","depth":2,"text":"New config option: target"},{"id":"smarter-nuxt-generate","depth":2,"text":"Smarter nuxt generate","children":[{"id":"crazy-fast-static-applications","depth":3,"text":"Crazy fast static applications"},{"id":"crawler-integrated","depth":3,"text":"Crawler integrated"},{"id":"faster-re-deploy","depth":3,"text":"Faster re-deploy"}]},{"id":"smarter-nuxt-start","depth":2,"text":"Smarter nuxt start"},{"id":"preview-mode","depth":2,"text":"Preview mode"},{"id":"commands","depth":2,"text":"Commands","children":[{"id":"what-to-do-next","depth":3,"text":"What to do next"}]}]}},"_type":"markdown","_id":"content:7.blog:5.going-full-static.md","_source":"content","_file":"7.blog/5.going-full-static.md","_extension":"md"}